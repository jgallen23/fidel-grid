/*!
  * Fidel Module 
  * v0.0.1
  * https://github.com/jgallen23/fidel-module
  * copyright JGA 2011
  * MIT License
  */
Fidel.Grid=Fidel.ViewController.extend({defaults:{paddingX:0,paddingY:0,imageLoadTimeout:100},init:function(){this.el.css("position","relative"),this.item.css("position","absolute"),this.find("img").load(this.proxy(this.imgLoaded)),$(window).resize(this.proxy(this.processGrid)),this.processGrid()},imgLoaded:function(){this.imageTimeout&&clearTimeout(this.imageTimeout),this.imageTimeout=setTimeout(this.proxy(this.processGrid),this.imageLoadTimeout)},processGrid:function(){this.itemWidth=this.item.width()+this.paddingX*2,this.columnCount=Math.floor(this.el.width()/this.itemWidth);var a=[];for(var b=0,c=this.item.length;b<c;b++){var d=$(this.item[b]),e=b%this.columnCount;a[e]||(a[e]=0);var f=a[e];a[e]+=d.height()+this.paddingY,d.css({top:f+"px",left:this.itemWidth*e+"px"})}}})